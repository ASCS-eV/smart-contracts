# Reference Implementation: Metadata for ENVITED-X Assets

This folder contains the reference example for the metadata specifications outlined in [EVES-003: ENVITED Asset Definition and Upload Process](https://github.com/ASCS-eV/EVES/blob/main/drafts/EVES-003/EVES-003.md). This demonstrates how metadata is structured, validated, and uploaded as part of the ENVITED-X Data Space.

## Overview

The reference implementation serves as a practical example for:
1. **Metadata Structure**: How asset metadata is defined according to Gaia-X standards **TODO** and ENVITED-X requirements.
2. **Validation**: Ensuring metadata conforms to SHACL constraints for `manifest.json` and `domainMetadata.json`.
3. **Interoperability**: Aligning with the Tezos TZIP-21 standard for token metadata.
4. **Upload Process**: Preparing metadata for integration with IPFS, CID-based identification, and ENVITED-X privacy layers.

For details about the process, refer to [EVES-003](https://github.com/ASCS-eV/EVES/blob/main/drafts/EVES-003/EVES-003.md).

## File Structure

📁 `metadata/`  
- 📄 `QmPwE3TS2hPxvCosUZJyF3RABMdKjT63K9fNroFMtqeEaH.zip`  
  *Example HD map renamed to CID v0.*
- 📄 `tzip16_contract_metadata.json`  
  *TZIP16 metadata of the smart contract deployed on Tezos.* 
- 📄 `tzip21_asset_manifest.json`  
  *Generated metadata file for IPFS referenced in the TZIP21 token metadata containing remote URLs.*
- 📄 `tzip21_token_metadata-schema.json`  
  *TZIP21 json schema to validate the token metadata.*
- 📄 `tzip21_token_metadata.json`  
  *Token metadata for minting assets.*

The shacles can be found [here](https://github.com/GAIA-X4PLC-AAD/hd-map-asset-example/tree/main/shacls-and-ontologies/used-shacls):

📁 `shacls-and-ontologies/used-shacls/`  
- 📄 `manifest_shacl.ttl`  
  *SHACL file for validating the `manifest.json`.*  
- 📄 `domainMetadata_shacl.ttl`  
  *SHACL file for validating the `domainMetadata.json`.*  

## Key Concepts

### Gaia-X Compliance
The metadata files follow the [Gaia-X Policy Rules Compliance Document (Release 24.11)](https://docs.gaia-x.eu/policy-rules-committee/compliance-document/24.11/). Compatibility with this release is a **TODO** in [EVES-003](https://github.com/ASCS-eV/EVES/blob/main/drafts/EVES-003/EVES-003.md).

### CID-Based Identification
All assets and metadata files are identified using CID v1, ensuring interoperability and immutability across the IPFS-based ENVITED-X Data Space.

### TZIP-21 Metadata
The `tzip21_asset_manifest.json` and `tzip21_token_metadata.json` demonstrate the mapping of asset information to TZIP-21 token metadata standards, as detailed in [EVES-003](https://github.com/ASCS-eV/EVES/blob/main/drafts/EVES-003/EVES-003.md).

## How to Use This Reference Implementation

1. **Validate Metadata**:
   - Use the provided SHACL files in the `shacls-and-ontologies/used-shacls/` folder to validate `manifest.json` and `domainMetadata.json`.
   - Ensure all required files and URLs referenced in the manifest are accessible.

2. **Prepare Metadata for IPFS**:
   - Upload the `tzip21_asset_manifest.json` and associated files to IPFS.
   - Convert relative file paths in `manifest.json` to CID-based IPFS URLs using the `tzip21_asset_manifest.json`.

3. **Integrate with ENVITED-X Data Space**:
   - Mint tokens using `tzip21_token_metadata.json`.

4. **Test and Debug**:
   - Compare local CID calculations with those generated by Pinata to ensure consistency.
   - Use this implementation as a baseline to adapt to your specific asset requirements.

## Related Documentation

- [EVES-003: ENVITED Asset Definition and Upload Process](https://github.com/ASCS-eV/EVES/blob/main/drafts/EVES-003/EVES-003.md)
- [Gaia-X 4 PLC-AAD Manifest Ontology](https://github.com/GAIA-X4PLC-AAD/ontology-management-base/tree/main/manifest/)
- [Pinata Documentation: Pinning CIDs](https://docs.pinata.cloud/web3/pinning/pinata-metadata#pinataoptions)
- [TZIP-21 Metadata Standard](https://tzip.tezos.com/proposal/tzip-21/)
